@model ExpensesApplication.ViewModels.ProjectExpenseViewModel
@inject UserManager<ApplicationUser> UserManager

@{
    ViewData["Title"] = "CustomersProjects";
}

<header class="header dark-bg dash-header">
    <div class="container">
        <div class="row">
            <div class="col-md-6">
                <h2> Select Customer</h2>
            </div>
            <div class="col-md-6 text-right">
                <div class="row">
                    <form asp-controller="Projects" asp-action="CustomersProjects" name="CustomersProjects">
                        <div class="col-s-8">

                            <select id="projectsCustomers" asp-for="customerTable"
                                    asp-items="ViewBag.SelectItem" class="form-control input input-lg">
                                <option value="" disabled selected>Select a Customer</option>
                                <option value="all">
                                    All
                                </option>
                            </select>
                        </div>

                    </form>
                </div>
            </div>
        </div>
</header>
<div class="row">
    <div class="col-lg-12">
        <section class="panel dash-panel">
            <header class="panel-heading">
                <h2>@Model.customerTable</h2>
            </header>

            <div class="table-responsive">
                @if (Model.customerTable != "all")
                {

                    <table class="table table-striped table-hover">
                        <thead>

                            @foreach (var Project in Model.Projects.Where(y => y.Customer == Model.customerTable))
                            {
                                <tr>
                                    <th>
                                        @Html.DisplayNameFor(modelItem => Project.Customer)
                                    </th>
                                    <th>
                                        @Html.DisplayNameFor(modelItem => Project.Manager)
                                    </th>
                                    <th>
                                        @Html.DisplayNameFor(modelItem => Project.Practice)
                                    </th>
                                    <th>
                                        @Html.DisplayNameFor(modelItem => Project.ProjectCode)
                                    </th>
                                </tr>
                                break;

                            }

                        </thead>
                        <tbody>
                            @foreach (var Project in Model.Projects.Where(y => y.Customer == Model.customerTable))
                            {
                                <tr>
                                    <td>
                                        @Html.DisplayFor(modelItem => Project.Customer)
                                    </td>
                                    <td>
                                        @Html.DisplayFor(modelItem => Project.Manager)
                                    </td>
                                    <td>
                                        @Html.DisplayFor(modelItem => Project.Practice)
                                    </td>
                                    <td>
                                        @Html.DisplayFor(modelItem => Project.ProjectCode)
                                    </td>
                                    <td>
                                        <!--how do I get it routing to the correct route?-->
                                        <!--it's currently in the expense controller and expense view folder, how do I get to projects-->
                                        @*<a asp-controller="Projects" asp-action="Edit" asp-route-id="@Project.ID">Edit</a> |
                                            <a asp-controller="Projects" asp-action="Details" asp-route-id="@Project.ID">Details</a> |
                                            <a asp-controller="Projects" asp-action="ProjectExpenseDetails" asp-route-id="@Project.ID">Project Expenses</a> |
                                            <a asp-controller="Projects" asp-action="Delete" asp-route-id="@Project.ID">Delete</a>*@
                                        <a asp-controller="Projects" asp-action="ProjectExpenseDetails" asp-route-id="@Project.ID"><button class="btn btn-primary">Details</button></a>
                                    </td>
                                </tr>
                            }


                        </tbody>
                    </table>

                }
                else
                {
                    <table class="table table-striped table-hover">
                        <thead>


                            @foreach (var Project in Model.Projects)
                            {
                                <tr>
                                    <th>
                                        @Html.DisplayNameFor(modelItem => Project.Customer)
                                    </th>
                                    <th>
                                        @Html.DisplayNameFor(modelItem => Project.Manager)
                                    </th>
                                    <th>
                                        @Html.DisplayNameFor(modelItem => Project.Practice)
                                    </th>
                                    <th>
                                        @Html.DisplayNameFor(modelItem => Project.ProjectCode)
                                    </th>
                                </tr>
                                break;
                            }

                        </thead>
                        <tbody>
                            @foreach (var Project in Model.Projects)
                            {
                                <tr>
                                    <td>
                                        @Html.DisplayFor(modelItem => Project.Customer)
                                    </td>
                                    <td>
                                        @Html.DisplayFor(modelItem => Project.Manager)
                                    </td>
                                    <td>
                                        @Html.DisplayFor(modelItem => Project.Practice)
                                    </td>
                                    <td>
                                        @Html.DisplayFor(modelItem => Project.ProjectCode)
                                    </td>
                                    <td>
                                        <!--how do I get it routing to the correct route?-->
                                        <!--it's currently in the expense controller and expense view folder, how do I get to projects-->
                                        @*<a asp-controller="Projects" asp-action="Edit" asp-route-id="@Project.ID">Edit</a> |
                                            <a asp-controller="Projects" asp-action="Details" asp-route-id="@Project.ID">Details</a> |
                                            <a asp-controller="Projects" asp-action="ProjectExpenseDetails" asp-route-id="@Project.ID">Project Expenses</a> |
                                            <a asp-controller="Projects" asp-action="Delete" asp-route-id="@Project.ID">Delete</a>*@
                                        <a asp-controller="Projects" asp-action="ProjectExpenseDetails" asp-route-id="@Project.ID"><button class="btn btn-primary">Details</button></a>
                                    </td>
                                </tr>
                            }


                        </tbody>
                    </table>

                }


        </section>
    </div>
</div>



